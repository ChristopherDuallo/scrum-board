{% extends "task/base.html" %}
{% block title %}Scrumboard{% endblock title %}
{% load task_extras %}
{% load staticfiles %}
{% block extra_head %}
    <link rel="stylesheet" type="text/css" href=" {% static 'stylesheets/task.css' %} ">
    <link rel="stylesheet" type="text/css" href=" {% static 'css/note.css' %} ">
    <link rel="stylesheet" type="text/css" href=" {% static 'css/header.css' %} ">
    <link rel="stylesheet" type="text/css" href=" {% static 'bcss/bootstrap.css' %} ">
{% endblock extra_head %}
{% block header %}
    <div class="head_wrapp">
        <div id="head" class="header">
            {% if user.is_authenticated %}
                <form action="{% url 'logout' %}">
                    <input class="input" type="submit" value="Log out"/>
                </form>    
            {% else %}
                <button class="input" data-toggle="modal" data-target=".bs-example-modal-sm">Log in:</button>
                <!--<input class="input" data-toggle="modal" data-target="#myModalLogin" type="submit" value="Log in:"/>-->
            {% endif %}
        </div>
    </div>
{% endblock header %}
{% block body %}
    {% if user.is_authenticated %}
        <div class="board-wrapper">
            {% for status, tasks in task_data %}
                <div class="column_wrapper">
                    <span>{{ status }}</span>
                    {% for task in tasks %}
                        <div class="note">
                            <div class="note-body">
                                <strong>{{ task.title }}</strong><br>
                                {{ task.body|truncatechars:20 }}<br/>
                            </div>            
                            <div class="members">
                                <span class="member-initials">{{ task.owner.username|shortify }}</span>
                            </div>
                        </div>
                    {% endfor %}
                    <br>
                    <!-- MODAL TRIGGER -->
                    <div data-toggle="tooltip" data-placement="bottom" title="Featured Tooltip">
                        <a href="" class="add-task" data-toggle="modal" data-target="#myModal">Add a task...</a>
                    </div>
                </div>
            {% endfor %}
            <div class="side-bar">
                <h5>{{ user }}</h5>
            </div>
        </div>
    {% else %}
        <span id="error">{{ error_message }}</span>
    {% endif %}

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">Create a Task</h4>
                </div>
                <div class="modal-body">
                    <div class="form_wrapper">
                        <div class="form">
                            <form action="{% url 'index' %}" value="" method="post">
                                {% csrf_token %}
                                <div id="form">
                                    <label for="title">Title:</label>
                                    <p>{{ form.title }}</p>
                                </div>
                                <div id="form">
                                    <label for="body">Task:</label>
                                    <p>{{ form.body }}</p>
                                </div>
                                <div id="form">
                                    <label for="status">Status:</label>
                                    <p>{{ form.status }}</p>
                                    <label for="owner">Owner:</label>
                                    <p>{{ form.owner }}</p>
                                    <label for="moderator">Moderator:</label>
                                    <p>{{ form.moderator }}</p>
                                </div>
                                <input class="button" type="submit" value="Post"/>
                            </form>
                        </div>    
                    </div>        
                </div>
            </div>
        </div>
    </div>
    <!-- Small modal -->

    <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="mySmallModalLabel">Ayo...</h4>
                </div>
                <div class="form_wrapper_login">
                    <div class="form_login">
                        <form action="{% url 'authen_view' %}" method="post">
                            {% csrf_token %}
                            <div class="login">
                                <div class="login_attr">
                                    <label for="username">User name:</label>
                                    <input type="text" name="username" value="" id="username">
                                </div>
                                <div class="login_attr">
                                    <label for="password">Password:</label>
                                    <input type="password" name="password" value="" id="password">
                                </div>
                                <div><input class="button" type="submit" value="Sign in:"/></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <script src="{% static 'js/jquery-1.11.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
{% endblock body %}


